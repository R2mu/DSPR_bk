<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GWS Data Science and Problem Recognition - 3&nbsp; Module 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./module3.html" rel="next">
<link href="./module1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./module2.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Module 2</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GWS Data Science and Problem Recognition</a> 
    </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Module 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Module 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Module 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./module4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Module 4</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">references.html</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#recap-from-previous-week" id="toc-recap-from-previous-week" class="nav-link active" data-scroll-target="#recap-from-previous-week"><span class="header-section-number">3.1</span> Recap from previous week</a>
  <ul class="collapse">
  <li><a href="#loading-packages-and-data" id="toc-loading-packages-and-data" class="nav-link" data-scroll-target="#loading-packages-and-data"><span class="header-section-number">3.1.1</span> Loading packages and data</a></li>
  <li><a href="#quick-summary" id="toc-quick-summary" class="nav-link" data-scroll-target="#quick-summary"><span class="header-section-number">3.1.2</span> Quick summary</a></li>
  <li><a href="#important-note" id="toc-important-note" class="nav-link" data-scroll-target="#important-note"><span class="header-section-number">3.1.3</span> Important note</a></li>
  <li><a href="#final-exploration" id="toc-final-exploration" class="nav-link" data-scroll-target="#final-exploration"><span class="header-section-number">3.1.4</span> Final exploration</a></li>
  </ul></li>
  <li><a href="#exploratory-and-descriptive-analysis" id="toc-exploratory-and-descriptive-analysis" class="nav-link" data-scroll-target="#exploratory-and-descriptive-analysis"><span class="header-section-number">3.2</span> Exploratory and Descriptive analysis</a></li>
  <li><a href="#a-quick-disclaimer-regarding-exploratory-analysis" id="toc-a-quick-disclaimer-regarding-exploratory-analysis" class="nav-link" data-scroll-target="#a-quick-disclaimer-regarding-exploratory-analysis"><span class="header-section-number">3.3</span> A quick disclaimer regarding exploratory analysis</a>
  <ul class="collapse">
  <li><a href="#dag-structure" id="toc-dag-structure" class="nav-link" data-scroll-target="#dag-structure"><span class="header-section-number">3.3.1</span> <strong>DAG Structure:</strong></a></li>
  </ul></li>
  <li><a href="#supervised-vs-unsupervised-problems" id="toc-supervised-vs-unsupervised-problems" class="nav-link" data-scroll-target="#supervised-vs-unsupervised-problems"><span class="header-section-number">3.4</span> Supervised vs Unsupervised problems</a>
  <ul class="collapse">
  <li><a href="#supervised-learning-overview" id="toc-supervised-learning-overview" class="nav-link" data-scroll-target="#supervised-learning-overview"><span class="header-section-number">3.4.1</span> <strong>Supervised Learning Overview</strong></a></li>
  <li><a href="#types-of-supervised-problems" id="toc-types-of-supervised-problems" class="nav-link" data-scroll-target="#types-of-supervised-problems"><span class="header-section-number">3.4.2</span> <strong>Types of Supervised Problems</strong></a></li>
  <li><a href="#choosing-a-model" id="toc-choosing-a-model" class="nav-link" data-scroll-target="#choosing-a-model"><span class="header-section-number">3.4.3</span> <strong>Choosing a Model</strong></a></li>
  </ul></li>
  <li><a href="#unsupervised-problems" id="toc-unsupervised-problems" class="nav-link" data-scroll-target="#unsupervised-problems"><span class="header-section-number">3.5</span> <strong>Unsupervised Problems</strong></a>
  <ul class="collapse">
  <li><a href="#common-algorithms-for-unsupervised-learning" id="toc-common-algorithms-for-unsupervised-learning" class="nav-link" data-scroll-target="#common-algorithms-for-unsupervised-learning"><span class="header-section-number">3.5.1</span> <strong>Common Algorithms for Unsupervised Learning</strong></a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">3.5.2</span> <strong>Summary</strong></a></li>
  </ul></li>
  <li><a href="#practice-exercises-module-2" id="toc-practice-exercises-module-2" class="nav-link" data-scroll-target="#practice-exercises-module-2"><span class="header-section-number">3.6</span> Practice exercises module 2</a></li>
  <li><a href="#resources." id="toc-resources." class="nav-link" data-scroll-target="#resources."><span class="header-section-number">3.7</span> Resources.</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Module 2</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="recap-from-previous-week" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="recap-from-previous-week"><span class="header-section-number">3.1</span> Recap from previous week</h2>
<p>Lets load some data first. This time to make it easier lets see if you can load data from my github.</p>
<p>Our current outline for the next couple of weeks looks like the below.</p>
<ol type="1">
<li><p>Introduction into R programming language and getting started with some descriptive statistics. (last week)</p></li>
<li><p><strong>Understanding key terms; Exploratory analysis, Supervised vs Unsupervised problems, regression vs classification, prediction vs association.</strong></p></li>
<li><p>A quick note on distributions - Supervised regression and classification problems using a generalized linear model framework. (Hypothesis testing) (Next module)</p></li>
</ol>
<section id="loading-packages-and-data" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="loading-packages-and-data"><span class="header-section-number">3.1.1</span> Loading packages and data</h3>
<p>We will load some data that we used from the previous session.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(data.table,tidyverse,htmlTable,factoextra,cluster,GGally)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>urlfile<span class="ot">=</span><span class="st">"https://raw.githubusercontent.com/R2mu/GWS_DSPR/main/data/mod2data.csv"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">fread</span>(urlfile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lets just remind ourselves of the dataset we are using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  9936 obs. of  44 variables:
 $ SEASON_ID                : int  2023 2023 2023 2023 2023 2023 2023 2023 2023 2023 ...
 $ MATCH_ID                 : int  266569840 266569840 266569840 266569840 266569840 266569840 266569840 266569840 266569840 266569840 ...
 $ GROUP_ROUND_NO           : int  1 1 1 1 1 1 1 1 1 1 ...
 $ VENUE_NAME               : chr  "MCG" "MCG" "MCG" "MCG" ...
 $ PERSON_ID                : int  250395 270146 270896 280819 290627 290847 293813 294036 294592 294674 ...
 $ FULLNAME                 : chr  "Jack Riewoldt" "Ed Curnow" "Trent Cotchin" "Dylan Grimes" ...
 $ SQUAD_NAME               : chr  "Richmond" "Carlton" "Richmond" "Richmond" ...
 $ Position                 : chr  "Key Fwd" "Mid Fwd" "Mid Fwd" "Key Def" ...
 $ OPP_SQUAD_NAME           : chr  "Carlton" "Richmond" "Carlton" "Carlton" ...
 $ SQUAD_MARGIN             : int  0 0 0 0 0 0 0 0 0 0 ...
 $ WL                       : int  0 0 0 0 0 0 0 0 0 0 ...
 $ WLD                      : int  0 0 0 0 0 0 0 0 0 0 ...
 $ BEHIND                   : int  0 0 0 0 1 0 3 0 0 1 ...
 $ CLEARANCE                : int  1 1 4 0 5 1 2 8 1 0 ...
 $ CONTESTED_MARK           : int  4 0 0 1 0 2 4 0 0 0 ...
 $ CONTESTED_POSSESSION     : int  10 2 11 4 13 10 9 14 4 2 ...
 $ CONTESTED_POSSESSION_POST: int  9 1 4 4 5 8 7 4 3 2 ...
 $ CONTESTED_POSSESSION_PRE : int  1 1 7 0 8 2 2 10 1 0 ...
 $ DISPOSAL                 : int  12 14 18 12 23 23 10 28 17 11 ...
 $ EFFECTIVE_DISPOSAL       : int  10 8 12 11 17 13 6 20 12 9 ...
 $ EFFECTIVE_HANDBALL       : int  3 2 7 4 10 6 1 14 4 2 ...
 $ EFFECTIVE_KICK           : int  7 6 5 7 7 7 5 6 8 7 ...
 $ GOAL                     : int  1 0 0 0 0 1 3 0 0 0 ...
 $ HANDBALL                 : int  3 2 9 4 13 8 1 18 6 2 ...
 $ HARD_BALL_GET            : int  0 1 3 1 1 4 2 3 0 1 ...
 $ HITOUT                   : int  1 0 0 0 0 0 1 0 0 0 ...
 $ IN50_KICK                : int  3 4 3 0 2 7 0 1 3 1 ...
 $ INSIDE_50                : int  4 4 3 0 2 8 1 2 3 2 ...
 $ INTERCEPT                : int  3 1 3 6 5 1 0 2 2 4 ...
 $ KICK                     : int  9 12 9 8 10 15 9 10 11 9 ...
 $ LONG_KICK                : int  0 1 3 2 4 3 1 0 3 3 ...
 $ MARK                     : int  6 6 3 5 4 6 6 5 5 4 ...
 $ MARK_ON_LEAD             : int  1 0 1 0 0 1 1 0 0 1 ...
 $ METRES_GAINED_EFF        : int  139 182 178 89 158 230 118 39 139 156 ...
 $ MISSED_TACKLE            : int  0 0 1 1 1 0 0 0 0 0 ...
 $ PLY_PRESS_PTS            : num  39.3 17.4 33.5 12 25.5 ...
 $ POINTS                   : int  6 0 0 0 1 6 21 0 0 1 ...
 $ RATING                   : num  18.2 3.9 8.2 6.4 7.9 13.7 13.2 12.5 2.3 4.2 ...
 $ SMOTHER                  : int  1 0 1 0 1 0 0 0 2 0 ...
 $ SPOIL                    : int  0 0 1 3 0 0 3 0 0 4 ...
 $ TACKLE                   : int  5 4 3 2 1 0 0 4 3 2 ...
 $ TOTAL_GAINED_METRES      : num  198 300 264 111 316 ...
 $ TURNOVER                 : int  3 5 5 1 4 7 2 2 3 1 ...
 $ UNCONTESTED_MARK         : int  2 6 3 4 4 4 2 5 5 4 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data1)<span class="sc">|&gt;</span><span class="fu">htmlTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="gmisc_table table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; border-bottom: 1px solid grey; border-top: 2px solid grey;"></th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SEASON_ID</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MATCH_ID</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">GROUP_ROUND_NO</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">VENUE_NAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">PERSON_ID</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">FULLNAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SQUAD_NAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">Position</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">OPP_SQUAD_NAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SQUAD_MARGIN</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">WL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">WLD</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">BEHIND</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CLEARANCE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_MARK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION_POST</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION_PRE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">DISPOSAL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_DISPOSAL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_HANDBALL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">GOAL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HANDBALL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HARD_BALL_GET</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HITOUT</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">IN50_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">INSIDE_50</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">INTERCEPT</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">LONG_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MARK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MARK_ON_LEAD</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">METRES_GAINED_EFF</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MISSED_TACKLE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">PLY_PRESS_PTS</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">POINTS</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">RATING</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SMOTHER</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SPOIL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TACKLE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TOTAL_GAINED_METRES</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TURNOVER</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">UNCONTESTED_MARK</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">266569840</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MCG</td>
<td style="text-align: center;">250395</td>
<td style="text-align: center;">Jack Riewoldt</td>
<td style="text-align: center;">Richmond</td>
<td style="text-align: center;">Key Fwd</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">139</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">39.3</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">18.2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">197.6</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">266569840</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MCG</td>
<td style="text-align: center;">270146</td>
<td style="text-align: center;">Ed Curnow</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">Mid Fwd</td>
<td style="text-align: center;">Richmond</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">14</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">182</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">17.4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3.9</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">300.3</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">266569840</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MCG</td>
<td style="text-align: center;">270896</td>
<td style="text-align: center;">Trent Cotchin</td>
<td style="text-align: center;">Richmond</td>
<td style="text-align: center;">Mid Fwd</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">18</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">178</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">33.45</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">8.2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">263.7</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">266569840</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MCG</td>
<td style="text-align: center;">280819</td>
<td style="text-align: center;">Dylan Grimes</td>
<td style="text-align: center;">Richmond</td>
<td style="text-align: center;">Key Def</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">89</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6.4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">111</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: center;">2023</td>
<td style="text-align: center;">266569840</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MCG</td>
<td style="text-align: center;">290627</td>
<td style="text-align: center;">Dion Prestia</td>
<td style="text-align: center;">Richmond</td>
<td style="text-align: center;">Mid</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">23</td>
<td style="text-align: center;">17</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">158</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">25.5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">7.9</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">316.3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="even">
<td style="text-align: left; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">2023</td>
<td style="text-align: center; border-bottom: 2px solid grey;">266569840</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">MCG</td>
<td style="text-align: center; border-bottom: 2px solid grey;">290847</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Dustin Martin</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Richmond</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Gen Fwd</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Carlton</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">2</td>
<td style="text-align: center; border-bottom: 2px solid grey;">10</td>
<td style="text-align: center; border-bottom: 2px solid grey;">8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">2</td>
<td style="text-align: center; border-bottom: 2px solid grey;">23</td>
<td style="text-align: center; border-bottom: 2px solid grey;">13</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">7</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">4</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">7</td>
<td style="text-align: center; border-bottom: 2px solid grey;">8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">15</td>
<td style="text-align: center; border-bottom: 2px solid grey;">3</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">230</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">25.5</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">13.7</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0</td>
<td style="text-align: center; border-bottom: 2px solid grey;">432.1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">7</td>
<td style="text-align: center; border-bottom: 2px solid grey;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="quick-summary" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="quick-summary"><span class="header-section-number">3.1.2</span> Quick summary</h3>
<p>Lets do some quick summaries in a similar fashion to what we did last time. To start of with I am going to have a look at some position summaries by win vs loss across key statistics.</p>
<p>Firstly to make the analysis a little simpler I am going to make the dataframe into what is called a <strong>long</strong> format. Now to be fair it is possible to summarize keeping the data in its current wide format but being confident in manipulating data.frames from wide to long and vice versa is very useful for data analysis in general.</p>
<p>Before I do that however, lets just check something</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data1<span class="sc">$</span>Position)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Key Fwd" "Mid Fwd" "Key Def" "Mid"     "Gen Fwd" "Wing"    "Gen Def"
[8] "Ruck"    ""       </code></pre>
</div>
</div>
<p>You may notice a “” is returned this represents a blank value, which ideally there should not be any. Lets have a look a little deeper</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Position<span class="sc">==</span><span class="st">""</span>)<span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(FULLNAME,PERSON_ID,GROUP_ROUND_NO)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        FULLNAME PERSON_ID GROUP_ROUND_NO
 1: Willie Rioli    296225              2
 2: Willie Rioli    296225              5
 3: Willie Rioli    296225              7
 4: Willie Rioli    296225              8
 5: Willie Rioli    296225             11
 6: Willie Rioli    296225             13
 7: Willie Rioli    296225             19
 8: Willie Rioli    296225             21
 9: Willie Rioli    296225             22
10: Willie Rioli    296225             23
11: Willie Rioli    296225             24
12: Willie Rioli    296225             25
13: Willie Rioli    296225             26</code></pre>
</div>
</div>
<p>Okay this is because he was referred to as “Junior Rioli” that year which means ideally I need to fix the initial join i did from the previous week to just be PERSON_ID and SEASON_ID and not include FULLNAME.<br>
I know however, that he played as “Gen Fwd” that year so lets quickly update that in our database.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> data1<span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">mutate</span>(<span class="at">Position=</span><span class="fu">ifelse</span>(SEASON_ID<span class="sc">==</span><span class="dv">2023</span><span class="sc">&amp;</span>PERSON_ID<span class="sc">==</span><span class="dv">296225</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Gen Fwd"</span>,Position))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can check out work with</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data1<span class="sc">$</span>Position)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Key Fwd" "Mid Fwd" "Key Def" "Mid"     "Gen Fwd" "Wing"    "Gen Def"
[8] "Ruck"   </code></pre>
</div>
</div>
<p>Okay lets now look to melt the data and drop some columns for the sake of it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">names</span>(data1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                names.data1.
1                  SEASON_ID
2                   MATCH_ID
3             GROUP_ROUND_NO
4                 VENUE_NAME
5                  PERSON_ID
6                   FULLNAME
7                 SQUAD_NAME
8                   Position
9             OPP_SQUAD_NAME
10              SQUAD_MARGIN
11                        WL
12                       WLD
13                    BEHIND
14                 CLEARANCE
15            CONTESTED_MARK
16      CONTESTED_POSSESSION
17 CONTESTED_POSSESSION_POST
18  CONTESTED_POSSESSION_PRE
19                  DISPOSAL
20        EFFECTIVE_DISPOSAL
21        EFFECTIVE_HANDBALL
22            EFFECTIVE_KICK
23                      GOAL
24                  HANDBALL
25             HARD_BALL_GET
26                    HITOUT
27                 IN50_KICK
28                 INSIDE_50
29                 INTERCEPT
30                      KICK
31                 LONG_KICK
32                      MARK
33              MARK_ON_LEAD
34         METRES_GAINED_EFF
35             MISSED_TACKLE
36             PLY_PRESS_PTS
37                    POINTS
38                    RATING
39                   SMOTHER
40                     SPOIL
41                    TACKLE
42       TOTAL_GAINED_METRES
43                  TURNOVER
44          UNCONTESTED_MARK</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dtLong <span class="ot">=</span> data1<span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">melt</span>(<span class="at">id.vars =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)<span class="sc">|&gt;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## going to remove some columns </span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>variable <span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"POINTS"</span>,<span class="st">"GOAL"</span>,<span class="st">"BEHIND"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lets now create a quick summary of the stats. Now to reiterate what I mentioned last week, this is where R can be really useful. Effectively, we need to create multiple levels of aggregation to get to the level we want and in excel for example this would require multiple pivot tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dtlongSum  <span class="ot">&lt;-</span> dtLong<span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GROUP_ROUND_NO,SQUAD_NAME,Position,variable,WL)<span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum =</span> <span class="fu">round</span>(<span class="fu">sum</span>(value,<span class="at">na.rm =</span> T),<span class="dv">2</span>))<span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the above effectively summarised to the position level</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Position, variable,WL)<span class="sc">|&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mu =</span> <span class="fu">round</span>(<span class="fu">mean</span>(sum),<span class="dv">2</span>),</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd =</span> <span class="fu">round</span>(<span class="fu">sd</span>(sum),<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'GROUP_ROUND_NO', 'SQUAD_NAME', 'Position',
'variable'. You can override using the `.groups` argument.
`summarise()` has grouped output by 'Position', 'variable'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># The above then averages the statistics via WL for each position over the season so effectively removes GROUP level data</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="do">## As I was building it I would use the below as an example of checking as I go  </span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#filter(SQUAD_NAME=="Adelaide Crows"&amp;variable=="CLEARANCE"&amp;Position=="Mid")</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dtlongSum)<span class="sc">|&gt;</span><span class="fu">htmlTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="gmisc_table table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; border-bottom: 1px solid grey; border-top: 2px solid grey;"></th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">Position</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">variable</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">WL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">mu</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">CLEARANCE</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">3.53</td>
<td style="text-align: center;">2.47</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">CLEARANCE</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">3.95</td>
<td style="text-align: center;">2.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">CONTESTED_MARK</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1.6</td>
<td style="text-align: center;">1.49</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">CONTESTED_MARK</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.57</td>
<td style="text-align: center;">1.26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">CONTESTED_POSSESSION</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">24.42</td>
<td style="text-align: center;">7.5</td>
</tr>
<tr class="even">
<td style="text-align: left; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Gen Def</td>
<td style="text-align: center; border-bottom: 2px solid grey;">CONTESTED_POSSESSION</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">24.28</td>
<td style="text-align: center; border-bottom: 2px solid grey;">7.26</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The above is still quite a long data.frame with 464 rows which might not be the easiest way to see the differences so lets re shape it again to see if it helps.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dcast.data.table</span>(<span class="fu">setDT</span>(dtlongSum),Position<span class="sc">+</span>variable<span class="sc">~</span>WL,<span class="at">value.var =</span> <span class="st">"mu"</span>)<span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable<span class="sc">==</span><span class="st">"DISPOSAL"</span>)<span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">difference =</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">1</span><span class="st">`</span><span class="sc">-</span><span class="st">`</span><span class="at">0</span><span class="st">`</span>,<span class="dv">1</span>))<span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">htmlTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="gmisc_table table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; border-bottom: 1px solid grey; border-top: 2px solid grey;"></th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">Position</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">variable</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">0</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">1</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">89.28</td>
<td style="text-align: center;">89.18</td>
<td style="text-align: center;">-0.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: center;">Gen Fwd</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">51.44</td>
<td style="text-align: center;">55.79</td>
<td style="text-align: center;">4.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: center;">Key Def</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">30.98</td>
<td style="text-align: center;">34.39</td>
<td style="text-align: center;">3.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: center;">Key Fwd</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">23.05</td>
<td style="text-align: center;">26.11</td>
<td style="text-align: center;">3.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: center;">Mid</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">83.1</td>
<td style="text-align: center;">87.57</td>
<td style="text-align: center;">4.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: center;">Mid Fwd</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">28.22</td>
<td style="text-align: center;">30.66</td>
<td style="text-align: center;">2.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: center;">Ruck</td>
<td style="text-align: center;">DISPOSAL</td>
<td style="text-align: center;">17.06</td>
<td style="text-align: center;">17.94</td>
<td style="text-align: center;">0.9</td>
</tr>
<tr class="even">
<td style="text-align: left; border-bottom: 2px solid grey;">8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Wing</td>
<td style="text-align: center; border-bottom: 2px solid grey;">DISPOSAL</td>
<td style="text-align: center; border-bottom: 2px solid grey;">38.56</td>
<td style="text-align: center; border-bottom: 2px solid grey;">38.76</td>
<td style="text-align: center; border-bottom: 2px solid grey;">0.2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Maybe we want to plot the differences</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dtLong<span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(MATCH_ID,SQUAD_NAME,WL,Position,variable)<span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum =</span> <span class="fu">sum</span>(value))<span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(variable<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"DISPOSAL"</span>,<span class="st">"CLEARANCE"</span>))<span class="sc">|&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(Position%in%c("Mid","Mid Fwd","Wing"))|&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">as.factor</span>(WL),sum))<span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">col=</span><span class="st">"gray80"</span>)<span class="sc">+</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">"pointrange"</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult=</span><span class="dv">1</span>),<span class="at">col=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(variable), <span class="fu">vars</span>(Position),<span class="at">scales =</span> <span class="st">"free_y"</span>)<span class="sc">+</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'MATCH_ID', 'SQUAD_NAME', 'WL', 'Position'.
You can override using the `.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="module2_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="important-note" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="important-note"><span class="header-section-number">3.1.3</span> Important note</h3>
<p>You guys are the experts here in being able to double check what numbers to expect. I want to strongly reiterate how much of coding is just checking your work as you go, are you getting numbers you expect? As I mentioned the beauty of R being modular is it easily allows for you to continuously check as you build.</p>
</section>
<section id="final-exploration" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="final-exploration"><span class="header-section-number">3.1.4</span> Final exploration</h3>
<p>Lets have a look at the global relationships across a range of variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>sum2 <span class="ot">=</span> dtLong<span class="sc">|&gt;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GROUP_ROUND_NO,SQUAD_NAME,variable)<span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum =</span> <span class="fu">round</span>(<span class="fu">sum</span>(value),<span class="dv">2</span>))<span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">values_from =</span> sum,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> variable)<span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'GROUP_ROUND_NO', 'SQUAD_NAME'. You can
override using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>sum2<span class="sc">|&gt;</span><span class="fu">head</span>()<span class="sc">|&gt;</span><span class="fu">htmlTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="gmisc_table table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; border-bottom: 1px solid grey; border-top: 2px solid grey;"></th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">GROUP_ROUND_NO</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SQUAD_NAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CLEARANCE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_MARK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION_POST</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION_PRE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">DISPOSAL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_DISPOSAL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_HANDBALL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">EFFECTIVE_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HANDBALL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HARD_BALL_GET</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HITOUT</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">IN50_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">INSIDE_50</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">INTERCEPT</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">LONG_KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MARK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MARK_ON_LEAD</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">METRES_GAINED_EFF</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MISSED_TACKLE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">PLY_PRESS_PTS</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">RATING</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SMOTHER</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">SPOIL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TACKLE</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TOTAL_GAINED_METRES</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">TURNOVER</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">UNCONTESTED_MARK</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Adelaide Crows</td>
<td style="text-align: center;">33</td>
<td style="text-align: center;">9</td>
<td style="text-align: center;">111</td>
<td style="text-align: center;">77</td>
<td style="text-align: center;">34</td>
<td style="text-align: center;">318</td>
<td style="text-align: center;">242</td>
<td style="text-align: center;">89</td>
<td style="text-align: center;">153</td>
<td style="text-align: center;">101</td>
<td style="text-align: center;">26</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">39</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">62</td>
<td style="text-align: center;">217</td>
<td style="text-align: center;">55</td>
<td style="text-align: center;">102</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">3992</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">613.35</td>
<td style="text-align: center;">178.6</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">30</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">6077.2</td>
<td style="text-align: center;">56</td>
<td style="text-align: center;">93</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Brisbane Lions</td>
<td style="text-align: center;">38</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">116</td>
<td style="text-align: center;">55</td>
<td style="text-align: center;">61</td>
<td style="text-align: center;">264</td>
<td style="text-align: center;">181</td>
<td style="text-align: center;">72</td>
<td style="text-align: center;">109</td>
<td style="text-align: center;">102</td>
<td style="text-align: center;">33</td>
<td style="text-align: center;">41</td>
<td style="text-align: center;">35</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">162</td>
<td style="text-align: center;">62</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">3879</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">650.4</td>
<td style="text-align: center;">161.2</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">37</td>
<td style="text-align: center;">46</td>
<td style="text-align: center;">5309.8</td>
<td style="text-align: center;">66</td>
<td style="text-align: center;">48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Carlton</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">18</td>
<td style="text-align: center;">148</td>
<td style="text-align: center;">100</td>
<td style="text-align: center;">48</td>
<td style="text-align: center;">341</td>
<td style="text-align: center;">241</td>
<td style="text-align: center;">92</td>
<td style="text-align: center;">149</td>
<td style="text-align: center;">120</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">26</td>
<td style="text-align: center;">33</td>
<td style="text-align: center;">45</td>
<td style="text-align: center;">79</td>
<td style="text-align: center;">221</td>
<td style="text-align: center;">67</td>
<td style="text-align: center;">97</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4119</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">580.65</td>
<td style="text-align: center;">186.2</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">29</td>
<td style="text-align: center;">55</td>
<td style="text-align: center;">5963.4</td>
<td style="text-align: center;">75</td>
<td style="text-align: center;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Collingwood</td>
<td style="text-align: center;">43</td>
<td style="text-align: center;">10</td>
<td style="text-align: center;">135</td>
<td style="text-align: center;">79</td>
<td style="text-align: center;">56</td>
<td style="text-align: center;">372</td>
<td style="text-align: center;">286</td>
<td style="text-align: center;">120</td>
<td style="text-align: center;">166</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">18</td>
<td style="text-align: center;">45</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">62</td>
<td style="text-align: center;">62</td>
<td style="text-align: center;">229</td>
<td style="text-align: center;">62</td>
<td style="text-align: center;">105</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">4611</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">594.45</td>
<td style="text-align: center;">250.5</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">6293</td>
<td style="text-align: center;">61</td>
<td style="text-align: center;">95</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">Essendon</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">128</td>
<td style="text-align: center;">83</td>
<td style="text-align: center;">45</td>
<td style="text-align: center;">414</td>
<td style="text-align: center;">322</td>
<td style="text-align: center;">142</td>
<td style="text-align: center;">180</td>
<td style="text-align: center;">159</td>
<td style="text-align: center;">28</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">54</td>
<td style="text-align: center;">66</td>
<td style="text-align: center;">63</td>
<td style="text-align: center;">255</td>
<td style="text-align: center;">45</td>
<td style="text-align: center;">131</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">4607</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">521.25</td>
<td style="text-align: center;">264.1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">30</td>
<td style="text-align: center;">37</td>
<td style="text-align: center;">6993.8</td>
<td style="text-align: center;">59</td>
<td style="text-align: center;">120</td>
</tr>
<tr class="even">
<td style="text-align: left; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Fremantle</td>
<td style="text-align: center; border-bottom: 2px solid grey;">28</td>
<td style="text-align: center; border-bottom: 2px solid grey;">14</td>
<td style="text-align: center; border-bottom: 2px solid grey;">146</td>
<td style="text-align: center; border-bottom: 2px solid grey;">102</td>
<td style="text-align: center; border-bottom: 2px solid grey;">44</td>
<td style="text-align: center; border-bottom: 2px solid grey;">437</td>
<td style="text-align: center; border-bottom: 2px solid grey;">334</td>
<td style="text-align: center; border-bottom: 2px solid grey;">145</td>
<td style="text-align: center; border-bottom: 2px solid grey;">189</td>
<td style="text-align: center; border-bottom: 2px solid grey;">179</td>
<td style="text-align: center; border-bottom: 2px solid grey;">30</td>
<td style="text-align: center; border-bottom: 2px solid grey;">45</td>
<td style="text-align: center; border-bottom: 2px solid grey;">56</td>
<td style="text-align: center; border-bottom: 2px solid grey;">65</td>
<td style="text-align: center; border-bottom: 2px solid grey;">92</td>
<td style="text-align: center; border-bottom: 2px solid grey;">258</td>
<td style="text-align: center; border-bottom: 2px solid grey;">63</td>
<td style="text-align: center; border-bottom: 2px solid grey;">136</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6</td>
<td style="text-align: center; border-bottom: 2px solid grey;">4615</td>
<td style="text-align: center; border-bottom: 2px solid grey;">4</td>
<td style="text-align: center; border-bottom: 2px solid grey;">633.3</td>
<td style="text-align: center; border-bottom: 2px solid grey;">200.2</td>
<td style="text-align: center; border-bottom: 2px solid grey;">11</td>
<td style="text-align: center; border-bottom: 2px solid grey;">24</td>
<td style="text-align: center; border-bottom: 2px solid grey;">53</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6581.1</td>
<td style="text-align: center; border-bottom: 2px solid grey;">82</td>
<td style="text-align: center; border-bottom: 2px solid grey;">122</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"METRES_GAINED_EFF"</span>, <span class="st">"PLY_PRESS_PTS"</span>,<span class="st">"KICK"</span>,<span class="st">"HANDBALL"</span>,<span class="st">"MARK"</span>,<span class="st">"CONTESTED_POSSESSION"</span>,<span class="st">"TACKLE"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>forPairs <span class="ot">&lt;-</span> sum2<span class="sc">|&gt;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">select</span>(<span class="sc">!</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)<span class="sc">|&gt;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">select</span>(cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(cols)

  # Now:
  data %&gt;% select(all_of(cols))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(forPairs)<span class="sc">+</span><span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="module2_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="exploratory-and-descriptive-analysis" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="exploratory-and-descriptive-analysis"><span class="header-section-number">3.2</span> Exploratory and Descriptive analysis</h2>
<p>The above is an example of both what we would consider <strong>EXPLORATORY</strong> and <strong>DESCRIPTIVE</strong> analysis. These analysis techniques are usually first steps we take when analysing data.</p>
<p><strong>Exploratory analysis</strong> can be really useful for thing such as</p>
<ol type="1">
<li><p>Identifying outliers or anomalies in the data (very important)</p></li>
<li><p>Observe if the problem is tractable/solvable (very important)</p></li>
<li><p>Assess distributional assumptions of the data (more on this next week)</p></li>
<li><p>Visual assessment of relationships or patterns that may exist within the data</p></li>
</ol>
<p>Where as <strong>descriptive analysis</strong> refers to summarizing the main variables of interest. You are not necessarily looking to infer a relationship or hypothesis per se but just are reporting relevant summary statistics e.g.&nbsp;mean, max, min, range, standard deviation, median, sum, proportion,count relating to a question at hand.</p>
<p>” The average disposal count for mid fielders was ….. for 2023 and …. for 2024.”</p>
<p>” The proportion of time player x played up forward was …. vs ….. played down back”</p>
</section>
<section id="a-quick-disclaimer-regarding-exploratory-analysis" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="a-quick-disclaimer-regarding-exploratory-analysis"><span class="header-section-number">3.3</span> A quick disclaimer regarding exploratory analysis</h2>
<p>While exploratory analysis is a powerful tool that is used almost subconsciously in our daily lives, it is important to exercise caution and maintain mental error control. The human brain is notoriously good at finding and justifying relationships in data that may genuinely just be noise. To highlight this problem, an additional chapter called “Multiple testing” was added to the second version of the ISLR book i recommend the previous module.<br>
Hypothesis testing is one type of tool that aims to help reduce the risk of being misled by noise. Ultimately, however, you bear a significant responsibility to develop a hypothesis or causal framework that justifies why you think the observed trend may indeed be valid.</p>
<p>Whilst, developing causal models can quickly become an extensive process a simply starting point is developing a Directed Acyclic Graph (DAG). A DAG is a graphical representation of a hypothetical model outlining causal effects. Outlined below is a quick example of how one may develop a dag.</p>
<p>We want to model the relationships between the following variables:</p>
<ul>
<li><p><strong>Parental Education (PE)</strong></p></li>
<li><p><strong>Student’s Motivation (SM)</strong></p></li>
<li><p><strong>Time Spent Studying (TS)</strong></p></li>
<li><p><strong>Attendance (A)</strong></p></li>
<li><p><strong>Academic Performance (AP)</strong></p></li>
</ul>
<p>Below we are going graphical represent relationships that we believe to impact these variables.</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Plot coordinates for graph not supplied! Generating coordinates, see ?coordinates for how to set your own.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="module2_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="dag-structure" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="dag-structure"><span class="header-section-number">3.3.1</span> <strong>DAG Structure:</strong></h3>
<p>For the above figure we would interpret it like so:</p>
<ul>
<li><p><strong>Parental Education (PE)</strong> affects both <strong>Student’s Motivation (SM)</strong> and <strong>Time Spent Studying (TS)</strong>.</p></li>
<li><p><strong>Student’s Motivation (SM)</strong> influences <strong>Time Spent Studying (TS)</strong>.</p></li>
<li><p><strong>Time Spent Studying (TS)</strong> and <strong>Attendance (A)</strong> both affect <strong>Academic Performance (AP)</strong>.</p></li>
<li><p><strong>Parental Education (PE)</strong> also directly affects <strong>Academic Performance (AP)</strong>.</p></li>
</ul>
<p>While this may initially seem trivial, a well-thought-out DAG can help identify situations where causal analysis approaches can be explored using observational data—an area long thought to be exclusive to randomized controlled trials. See this paper by Dr Judd Kalkhoven an academic from WSU who gives some examples of causal modelling from an athlete injury perspective <a href="https://link.springer.com/article/10.1007/s40279-024-02008-1" class="uri">https://link.springer.com/article/10.1007/s40279-024-02008-1</a>.</p>
</section>
</section>
<section id="supervised-vs-unsupervised-problems" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="supervised-vs-unsupervised-problems"><span class="header-section-number">3.4</span> Supervised vs Unsupervised problems</h2>
<section id="supervised-learning-overview" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="supervised-learning-overview"><span class="header-section-number">3.4.1</span> <strong>Supervised Learning Overview</strong></h3>
<p>In our previous session, we explored our ability to predict score differential using a range of statistics. The simple linear model we examined was an example of a supervised regression problem. The easiest way to identify whether something can be thought of as a supervised problem is by determining whether you have a clear outcome of interest that you want to predict. If the answer is yes, then it is a supervised problem.</p>
</section>
<section id="types-of-supervised-problems" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="types-of-supervised-problems"><span class="header-section-number">3.4.2</span> <strong>Types of Supervised Problems</strong></h3>
<p>In reality, most of the problems/questions you encounter will relate to predicting some quantity, whether it be an absolute number such as score differential (a regression problem), win vs.&nbsp;loss probability (a classification problem), or predicting the next action type, e.g., kick, handball, tackle (a multinomial classification problem).</p>
<ul>
<li><p><strong>Prediction of a number = Regression problem</strong></p></li>
<li><p><strong>Prediction of a class/category = Classification problem</strong></p></li>
</ul>
</section>
<section id="choosing-a-model" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="choosing-a-model"><span class="header-section-number">3.4.3</span> <strong>Choosing a Model</strong></h3>
<p>There are often numerous models to answer the same regression or classification problem, and there will usually be trade-offs between certain models that you need to explore. A useful first step is asking yourself, “Is it important that I understand how the model made the prediction it did, or is it just important that the model can predict accurately?” This question can help you narrow down the scope of models you may use.</p>
<p><img src="flexibilityvsinterpretability.png" class="img-fluid"></p>
<p>The above picture is taken from ISLR book I recommended (<a href="https://www.statlearning.com/" class="uri">https://www.statlearning.com/</a>) and it highlights some of these tradeoffs. Over the coming weeks we will explore models that exist along this continuum but I want you to also think of the x axis as dataset size required.</p>
</section>
</section>
<section id="unsupervised-problems" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="unsupervised-problems"><span class="header-section-number">3.5</span> <strong>Unsupervised Problems</strong></h2>
<p>Let’s say, for example, that you don’t have a specific dependent/outcome variable that you are interested in predicting. Instead, you are more interested in exploring whether there are any interesting patterns, clusters, or groupings that exist within the data. You are not too concerned with how they are structured, just whether there is a structure. This would be considered an unsupervised learning problem.</p>
<section id="common-algorithms-for-unsupervised-learning" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="common-algorithms-for-unsupervised-learning"><span class="header-section-number">3.5.1</span> <strong>Common Algorithms for Unsupervised Learning</strong></h3>
<ol type="1">
<li><p><strong>Clustering Algorithms:</strong></p>
<ul>
<li><p>Aim to find multidimensional similarities between variables, grouping data points into clusters based on their features.</p></li>
<li><p>Examples: K-means clustering, hierarchical clustering, DBSCAN, GMM.</p></li>
</ul></li>
<li><p><strong>Principal Component Analysis (PCA):</strong></p>
<ul>
<li><p>Aims to find components that can best explain the variance between variables, reducing the dimensionality of the data while retaining most of the variance.</p></li>
<li><p>Useful for data visualization and simplifying complex datasets.</p></li>
</ul></li>
<li><p><strong>Association Rules / Market Basket Analysis:</strong></p>
<ul>
<li><p>Aim to find associations between items or transactions, identifying how frequently certain items or events occur together.</p></li>
<li><p>Example: Market basket analysis can reveal that customers who buy bread often buy butter as well.</p></li>
</ul></li>
</ol>
</section>
<section id="summary" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="summary"><span class="header-section-number">3.5.2</span> <strong>Summary</strong></h3>
<p>Unsupervised learning is about discovering the inherent structure within your data without predefined labels or outcomes. It’s particularly useful when you want to explore and understand the underlying patterns or relationships in your dataset.</p>
<p>Below is a quick example where we are using a variant of the kmeans clustering algorithm.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## select some columns to analyse. I do suggest to do select only variables you are interested in. e.g. don;t just put everything in and hope for the best.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"METRES_GAINED_EFF"</span>, <span class="st">"PLY_PRESS_PTS"</span>,<span class="st">"KICK"</span>,<span class="st">"HANDBALL"</span>,<span class="st">"MARK"</span>,<span class="st">"CONTESTED_POSSESSION"</span>,<span class="st">"count"</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="do">### create a quick summary of all players from 2023</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>smalldf <span class="ot">&lt;-</span> data1<span class="sc">|&gt;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FULLNAME,Position)<span class="sc">|&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">count =</span> <span class="fu">length</span>(FULLNAME))<span class="sc">|&gt;</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FULLNAME,Position)<span class="sc">|&gt;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="do">## the below is a way where you can summarise in the wide format</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">all_of</span>(cols), mean))<span class="sc">|&gt;</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()<span class="sc">|&gt;</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## going to remove players with less than 5 games</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>count<span class="sc">&lt;=</span><span class="dv">5</span>)<span class="sc">|&gt;</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dont need the count column after so going to remove</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'FULLNAME'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="do">## outside the scope of but we need to remove players name from being a column variable to being a row now. </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>smallerdf <span class="ot">&lt;-</span> smalldf<span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">column_to_rownames</span>(<span class="st">"FULLNAME"</span>)<span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">select</span>(<span class="sc">!</span>Position)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="do">## We are going to compute a slightly more complicated kmeans algo </span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the reasoning is a little complicated but it just better matches our data. </span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="do">### compute gowers distance. </span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># this calcualtes how far away each player is from each other across all statistics and represents as one number. </span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>dissimilarity_matrix <span class="ot">&lt;-</span> <span class="fu">daisy</span>(smallerdf,</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>                               <span class="at">metric =</span> <span class="st">"gower"</span>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="do">## convert to a matrix</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>gower_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dissimilarity_matrix)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="do">### find number of clusters within group. I know ahead of time that 3 is an okay number but usually you may need to explore a number of cluster sizes. </span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="do">## below is the clustering algo we will use</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># For reproducibility</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>pam_result <span class="ot">&lt;-</span> <span class="fu">pam</span>(gower_mat, <span class="at">k =</span> <span class="dv">3</span>)</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="do">## join computed cluster back on the inital dataframe</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>smalldf <span class="ot">&lt;-</span> smalldf<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">cluster =</span> pam_result<span class="sc">$</span>clustering)</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="do">## lets plot the results </span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(pam_result,<span class="at">geom =</span> <span class="st">"text"</span>,</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>               <span class="at">ellipse.type =</span> <span class="st">"convex"</span>,</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a>               <span class="at">show.clust.cent =</span> <span class="cn">TRUE</span>,</span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">ggtheme =</span> <span class="fu">theme_classic</span>(),</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">labelsize =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="module2_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Lets get a feel for what differentiates the clusters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>clusterLong <span class="ot">=</span><span class="fu">setDT</span>(smalldf)<span class="sc">|&gt;</span><span class="fu">melt.data.table</span>(<span class="at">id.vars =</span> <span class="fu">c</span>(<span class="st">"FULLNAME"</span>,<span class="st">"Position"</span>,<span class="st">"cluster"</span>))</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(clusterLong,<span class="fu">aes</span>(value,<span class="fu">as.factor</span>(cluster)))<span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">col=</span>Position))<span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun.data =</span> <span class="st">"mean_sdl"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">"crossbar"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">fun.args =</span> <span class="fu">list</span>(<span class="at">mult=</span><span class="dv">1</span>),<span class="at">col=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>variable,<span class="at">scales =</span> <span class="st">"free"</span>,<span class="at">ncol =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()<span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="module2_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finally, a question you may have from this which players are most similar to another player in a multidimensional case.</p>
<p>Firstly, I need to create a helper function to do this. I know this may seem scary but I was able to do this within a couple of minutes of searching on google and using chatGPT.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You don;t need to necessarily understand what this function does but it allows us to find the most similar players based off the multidimensioal calculation we did before.</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>find_most_similar <span class="ot">&lt;-</span> <span class="cf">function</span>(df, gower_matrix, individual, <span class="at">n =</span> <span class="dv">1</span>) {</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the index of the selected individual</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  individual_index <span class="ot">&lt;-</span> <span class="fu">which</span>(df<span class="sc">$</span>FULLNAME <span class="sc">==</span> individual)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Get the distances for the selected individual</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  distances <span class="ot">&lt;-</span> gower_matrix[individual_index, ]</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set the distance to itself as Inf to exclude it from the nearest neighbors</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  distances[individual_index] <span class="ot">&lt;-</span> <span class="cn">Inf</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Find the indices of the n smallest distances</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  nearest_indices <span class="ot">&lt;-</span> <span class="fu">order</span>(distances)[<span class="dv">1</span><span class="sc">:</span>n]</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Include the selected individual in the result</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  all_indices <span class="ot">&lt;-</span> <span class="fu">c</span>(individual_index, nearest_indices)</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return the rows of the selected individual and nearest individuals</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(df[all_indices, ])</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Run the helper function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find_most_similar</span>(smalldf, gower_mat, <span class="st">'Toby Greene'</span>, <span class="at">n =</span> <span class="dv">3</span>)<span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), round, <span class="dv">1</span>))<span class="sc">|&gt;</span><span class="fu">htmlTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="gmisc_table table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; border-bottom: 1px solid grey; border-top: 2px solid grey;"></th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">FULLNAME</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">Position</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">METRES_GAINED_EFF</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">PLY_PRESS_PTS</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">KICK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">HANDBALL</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">MARK</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">CONTESTED_POSSESSION</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey;">cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: center;">Toby Greene</td>
<td style="text-align: center;">Gen Fwd</td>
<td style="text-align: center;">217.6</td>
<td style="text-align: center;">30.4</td>
<td style="text-align: center;">12</td>
<td style="text-align: center;">5.7</td>
<td style="text-align: center;">4.4</td>
<td style="text-align: center;">7.7</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: center;">Christian Salem</td>
<td style="text-align: center;">Gen Def</td>
<td style="text-align: center;">212.2</td>
<td style="text-align: center;">31.6</td>
<td style="text-align: center;">12.5</td>
<td style="text-align: center;">6.6</td>
<td style="text-align: center;">3.9</td>
<td style="text-align: center;">5.8</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: center;">Steele Sidebottom</td>
<td style="text-align: center;">Wing</td>
<td style="text-align: center;">227.2</td>
<td style="text-align: center;">32.8</td>
<td style="text-align: center;">12.8</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">4.2</td>
<td style="text-align: center;">6.9</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: left; border-bottom: 2px solid grey;">4</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Ben Ainsworth</td>
<td style="text-align: center; border-bottom: 2px solid grey;">Gen Fwd</td>
<td style="text-align: center; border-bottom: 2px solid grey;">203</td>
<td style="text-align: center; border-bottom: 2px solid grey;">26.9</td>
<td style="text-align: center; border-bottom: 2px solid grey;">10.9</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6.8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">4.8</td>
<td style="text-align: center; border-bottom: 2px solid grey;">6.5</td>
<td style="text-align: center; border-bottom: 2px solid grey;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Always good to cross reference if you think these results make sense.</p>
<p>We will talk about some other use cases of unsupervised problems in later modules.</p>
</section>
</section>
<section id="practice-exercises-module-2" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="practice-exercises-module-2"><span class="header-section-number">3.6</span> Practice exercises module 2</h2>
<ol type="1">
<li><p>Think about questions you may have from datasets you have used. What would you classify your question as? e.g.&nbsp;( supervised, unsupervised, regression or classification)</p></li>
<li><p>Could you defend or represent your problem as a DAG?</p></li>
<li><p>Can you think of any questions that might be appropriate for an unsupervised learning problem?</p></li>
</ol>
</section>
<section id="resources." class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="resources."><span class="header-section-number">3.7</span> Resources.</h2>
<p>ISLR <a href="https://www.statlearning.com/" class="uri">https://www.statlearning.com/</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./module1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Module 1</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./module3.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Module 3</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>